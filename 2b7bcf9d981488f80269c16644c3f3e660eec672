{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "f391eb9c_e3cea1e1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-06-30T09:09:25Z",
      "side": 1,
      "message": "Need to look at the security implications.",
      "revId": "2b7bcf9d981488f80269c16644c3f3e660eec672",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1644f2a7_bebc93c6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000003
      },
      "writtenOn": "2021-07-01T19:21:42Z",
      "side": 1,
      "message": "yep, this would be my main concern here as well. I\u0027d be *very* cautious with this kind of change.",
      "parentUuid": "f391eb9c_e3cea1e1",
      "revId": "2b7bcf9d981488f80269c16644c3f3e660eec672",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f50541f9_47bfeb7b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2021-09-02T18:18:10Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "1644f2a7_bebc93c6",
      "revId": "2b7bcf9d981488f80269c16644c3f3e660eec672",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5fafba40_958fae1d",
        "filename": "core/java/android/provider/DocumentsProvider.java",
        "patchSetId": 1
      },
      "lineNbr": 192,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2021-06-30T19:38:52Z",
      "side": 1,
      "message": "This is where mAuthority is set. My understanding is that its value comes from extending this class and setting the authority for the provider component in the manifest xml. This also explains why it should/would not contain the userid with it",
      "range": {
        "startLine": 192,
        "startChar": 8,
        "endLine": 192,
        "endChar": 31
      },
      "revId": "2b7bcf9d981488f80269c16644c3f3e660eec672",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "87c5d4b2_4880d600",
        "filename": "core/java/android/provider/DocumentsProvider.java",
        "patchSetId": 1
      },
      "lineNbr": 192,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-08-18T21:30:46Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "5fafba40_958fae1d",
      "range": {
        "startLine": 192,
        "startChar": 8,
        "endLine": 192,
        "endChar": 31
      },
      "revId": "2b7bcf9d981488f80269c16644c3f3e660eec672",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "37f62bbd_48985bcb",
        "filename": "core/java/android/provider/DocumentsProvider.java",
        "patchSetId": 1
      },
      "lineNbr": 1118,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2021-06-30T19:38:52Z",
      "side": 1,
      "message": "As explained above, it would make sense that mAuthority would never contain the user id. This check is present to ensure that a provider cannot be used if the authority does not match it. Stripping the URI from the user id we appended to query and use the content providers in another user for the sake of a string comparison I would say makes sense",
      "range": {
        "startLine": 1118,
        "startChar": 13,
        "endLine": 1118,
        "endChar": 84
      },
      "revId": "2b7bcf9d981488f80269c16644c3f3e660eec672",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dd09fe76_05dc61e4",
        "filename": "core/java/android/provider/DocumentsProvider.java",
        "patchSetId": 1
      },
      "lineNbr": 1118,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-08-12T17:05:25Z",
      "side": 1,
      "message": "What would help here is doing this for only for our specific use-case rather than doing a generic change\n\n```\nif (!mAuthority.equals(authority)) {\n    if (getCallingPackage() \u003d\u003d seedvault \u0026\u0026 authority \u003d\u003d usb \u0026\u0026 has INTERACT_ACROSS_USERS) {\n        if (!mAuthority.equals(ContentProvider.getAuthorityWithoutUserId(authority))) {\n        ....\n        }\n    }\n}",
      "parentUuid": "37f62bbd_48985bcb",
      "range": {
        "startLine": 1118,
        "startChar": 13,
        "endLine": 1118,
        "endChar": 84
      },
      "revId": "2b7bcf9d981488f80269c16644c3f3e660eec672",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "30d44a76_7e981297",
        "filename": "core/java/android/provider/DocumentsProvider.java",
        "patchSetId": 1
      },
      "lineNbr": 1118,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-08-18T21:30:46Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "dd09fe76_05dc61e4",
      "range": {
        "startLine": 1118,
        "startChar": 13,
        "endLine": 1118,
        "endChar": 84
      },
      "revId": "2b7bcf9d981488f80269c16644c3f3e660eec672",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    }
  ]
}