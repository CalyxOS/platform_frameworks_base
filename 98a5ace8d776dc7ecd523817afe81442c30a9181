{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "5bccd2c1_1f6888af",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-03-23T19:48:54Z",
      "side": 1,
      "message": "Changes in patchset 6:\n- System apps that lack the INTERNET permission are not treated like user apps that lack it. User apps lacking the permission are added to the denylist right away. Now, system apps are not.\n- As part of above, do some refactoring to make the logic clearer.",
      "revId": "98a5ace8d776dc7ecd523817afe81442c30a9181",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e0c7041b_3df7e390",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-03-27T13:54:48Z",
      "side": 1,
      "message": "Tested behavior of system apps by:\n1. Build and flash with the INTERNET permission missing for a system package (Contacts).\n2. Check toggles for app. They are disabled but on.\n3. Build and flash with the INTERNET permission added back.\n4. Check toggles for app. They are on.\n\nA naturally-occurring visual cue to this behavior (with this topic) is that when you install a user app without INTERNET permission, the toggles will be disabled-off, but system apps without INTERNET are disabled-on.",
      "revId": "98a5ace8d776dc7ecd523817afe81442c30a9181",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e7dbd854_f58b8477",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-04-08T14:49:03Z",
      "side": 1,
      "message": "This actually does not migrate properly from pre-12 after all, as I just found out accidentally. My daily driver had the patchset from prior to adding and using LINEAGE_VERSION, so it migrated again and removed network access from almost all apps because uids_allowed_on_restricted_networks was already emptied out. That would happen for users upgrading from pre-12 too.\n\nVERSION_SUPPORTED_CARRIER_USAGE is added in 12, so we can decide to only migrate if version \u003e\u003d that with the lineageVersion check staying the same.",
      "revId": "98a5ace8d776dc7ecd523817afe81442c30a9181",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "56a9cd44_8edea218",
        "filename": "services/core/java/com/android/server/net/NetworkPolicyManagerService.java",
        "patchSetId": 6
      },
      "lineNbr": 1285,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-03-23T19:48:54Z",
      "side": 1,
      "message": "I\u0027m really not sure when a system app would be newly-added while the system is up and running, but in case it happens, we want to be sure it doesn\u0027t get added to the denylist, regardless of whether it currently has the INTERNET permission or not.",
      "revId": "98a5ace8d776dc7ecd523817afe81442c30a9181",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    }
  ]
}