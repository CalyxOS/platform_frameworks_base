{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "8994d798_16c636ab",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-10-18T22:20:24Z",
      "side": 1,
      "message": "Looks like it is working. With `-userdebug`, there is no change in behavior (can install same-version system app or APEX on top).\n\nI did not build entirely for `-user` yet, just tried changing the added `!Build.IS_DEBUGGABLE` to `true` for testing.\n\nExample output:\n\n```\nadb: failed to install out/target/product/bluejay/system_ext/priv-app/Settings/Settings.apk: Failure [INSTALL_FAILED_VERSION_DOWNGRADE: Downgrade detected: Update version code 34 must be greater than 34 to upgrade a system app.]\nadb: failed to install out/target/product/bluejay/system/apex/com.android.os.statsd.apex: Error [-25] [INSTALL_FAILED_VERSION_DOWNGRADE: Install of same-version APEX package com.android.os.statsd is not allowed. Active version: 340090000]\n```",
      "revId": "bf051e403e0c7bd6dca49acd18e705cf2e1838bd",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "af280bd2_4f7c5e04",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-10-18T22:20:45Z",
      "side": 1,
      "message": "Run in an actual `-user` build for a while.",
      "revId": "bf051e403e0c7bd6dca49acd18e705cf2e1838bd",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "61d41a84_92c8c5df",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-10-18T22:22:22Z",
      "side": 1,
      "message": "...and actually test this in it.",
      "parentUuid": "af280bd2_4f7c5e04",
      "revId": "bf051e403e0c7bd6dca49acd18e705cf2e1838bd",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "62c7e7c5_70bf693e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-10-18T22:22:22Z",
      "side": 1,
      "message": "Test that newer builds don\u0027t somehow get confused and reject existing system apps or APEX because the version code is the same!",
      "revId": "bf051e403e0c7bd6dca49acd18e705cf2e1838bd",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "744ef4e4_ec5d7d01",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2023-10-18T23:19:54Z",
      "side": 1,
      "message": "There are a lot of CTS tests for package install, and there might be some in fw/b too.\n\nWe should run those with `atest`",
      "revId": "bf051e403e0c7bd6dca49acd18e705cf2e1838bd",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5363faac_92671e42",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2023-10-18T23:21:49Z",
      "side": 1,
      "message": "What we can do with a change like this is ship it at a time when we\u0027re able to run a longer beta.",
      "parentUuid": "61d41a84_92c8c5df",
      "revId": "bf051e403e0c7bd6dca49acd18e705cf2e1838bd",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "876c5021_8685ca1d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-11-09T16:50:37Z",
      "side": 1,
      "message": "Ack, and it\u0027s been running on my daily driver and not causing problems except slight dev inconvenience (no out-of-band updates possible for affected system apps; working as intended).",
      "parentUuid": "5363faac_92671e42",
      "revId": "bf051e403e0c7bd6dca49acd18e705cf2e1838bd",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "31f0be15_99d4cffa",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-11-09T16:50:37Z",
      "side": 1,
      "message": "My daily driver didn\u0027t implode, so this part should be fine.",
      "parentUuid": "62c7e7c5_70bf693e",
      "revId": "bf051e403e0c7bd6dca49acd18e705cf2e1838bd",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2f80a2d3_a0b8d522",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-12-08T18:17:04Z",
      "side": 1,
      "message": "CtsInstallHostTestCases is passing, which includes android.cts.install.host.InstallTest, DowngradeTest, SamegradeTest. It took 4554s to complete, with lots of reboots for the staged tests.\n\nStagedInstallInternalTest passing. There are other tests too, like PackageManagerServiceHostTests or something to that effect, but that failed to even run locally.",
      "parentUuid": "744ef4e4_ec5d7d01",
      "revId": "bf051e403e0c7bd6dca49acd18e705cf2e1838bd",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "810e336d_0ef1ea9e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-12-08T18:17:04Z",
      "side": 1,
      "message": "Does this interfere with com.android.cts.ctsshim?",
      "revId": "bf051e403e0c7bd6dca49acd18e705cf2e1838bd",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "71da5e90_17882c8a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2024-02-29T04:36:55Z",
      "side": 1,
      "message": "Updated system apps should be able to have the same updated version installed again. The goal here is to prevent the system-shipped version from being replaced with a version that matches what was shipped, but is different (vulnerable).\n\nRight now, if you update TrichromeLibrary, you can\u0027t install a new version with the same version code as the updated version. That is not intended.",
      "revId": "bf051e403e0c7bd6dca49acd18e705cf2e1838bd",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f803e304_c8dc67ef",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2024-02-29T04:39:27Z",
      "side": 1,
      "message": "Actually I think it is fine with TrichromeLibrary, but not with TrichromeChrome. So this change doesn\u0027t handle libraries at all possibly. May be fine that it doesn\u0027t, but the problem stands.",
      "parentUuid": "71da5e90_17882c8a",
      "revId": "bf051e403e0c7bd6dca49acd18e705cf2e1838bd",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    }
  ],
  "submitRequirementResults": [
    {
      "submitRequirement": {
        "name": "Builds",
        "description": {
          "value": "Make sure it builds. A minimum vote is blocking."
        },
        "applicabilityExpression": {},
        "submittabilityExpression": {
          "expressionString": "label:Builds\u003dMAX AND -label:Builds\u003dMIN"
        },
        "overrideExpression": {
          "value": {
            "expressionString": "label:Builds\u003d0 AND (label:Works\u003dMAX OR label:Bypass-Verification\u003dMAX)"
          }
        },
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {},
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:Builds=MAX AND -label:Builds=MIN"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["label:Builds=MAX","label:Builds=MIN"]}
      },
      "overrideExpressionResult": {
        "value": {"expression":{"expressionString":"label:Builds=0 AND (label:Works=MAX OR label:Bypass-Verification=MAX)"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":["label:Builds=0"],"failingAtoms":["label:Works=MAX","label:Bypass-Verification=MAX"]}
      },
      "patchSetCommitId": "bf051e403e0c7bd6dca49acd18e705cf2e1838bd",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "Code-Review",
        "description": {
          "value": "A maximum vote is required for the \u0027Code-Review\u0027 label. A minimum vote is blocking."
        },
        "applicabilityExpression": {},
        "submittabilityExpression": {
          "expressionString": "label:Code-Review\u003dMAX AND -label:Code-Review\u003dMIN"
        },
        "overrideExpression": {},
        "allowOverrideInChildProjects": false
      },
      "applicabilityExpressionResult": {},
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:Code-Review=MAX AND -label:Code-Review=MIN"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["label:Code-Review=MAX","label:Code-Review=MIN"]}
      },
      "overrideExpressionResult": {},
      "patchSetCommitId": "bf051e403e0c7bd6dca49acd18e705cf2e1838bd",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "Works",
        "description": {
          "value": "Make sure it works. A minimum vote is blocking."
        },
        "applicabilityExpression": {},
        "submittabilityExpression": {
          "expressionString": "label:Works\u003dMAX AND -label:Works\u003dMIN"
        },
        "overrideExpression": {
          "value": {
            "expressionString": "label:Works\u003d0 AND label:Bypass-Verification\u003dMAX"
          }
        },
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {},
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:Works=MAX AND -label:Works=MIN"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["label:Works=MAX","label:Works=MIN"]}
      },
      "overrideExpressionResult": {
        "value": {"expression":{"expressionString":"label:Works=0 AND label:Bypass-Verification=MAX"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":["label:Works=0"],"failingAtoms":["label:Bypass-Verification=MAX"]}
      },
      "patchSetCommitId": "bf051e403e0c7bd6dca49acd18e705cf2e1838bd",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    }
  ]
}