{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "8994d798_16c636ab",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-10-18T22:20:24Z",
      "side": 1,
      "message": "Looks like it is working. With `-userdebug`, there is no change in behavior (can install same-version system app or APEX on top).\n\nI did not build entirely for `-user` yet, just tried changing the added `!Build.IS_DEBUGGABLE` to `true` for testing.\n\nExample output:\n\n```\nadb: failed to install out/target/product/bluejay/system_ext/priv-app/Settings/Settings.apk: Failure [INSTALL_FAILED_VERSION_DOWNGRADE: Downgrade detected: Update version code 34 must be greater than 34 to upgrade a system app.]\nadb: failed to install out/target/product/bluejay/system/apex/com.android.os.statsd.apex: Error [-25] [INSTALL_FAILED_VERSION_DOWNGRADE: Install of same-version APEX package com.android.os.statsd is not allowed. Active version: 340090000]\n```",
      "revId": "bf051e403e0c7bd6dca49acd18e705cf2e1838bd",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "af280bd2_4f7c5e04",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-10-18T22:20:45Z",
      "side": 1,
      "message": "Run in an actual `-user` build for a while.",
      "revId": "bf051e403e0c7bd6dca49acd18e705cf2e1838bd",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "61d41a84_92c8c5df",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-10-18T22:22:22Z",
      "side": 1,
      "message": "...and actually test this in it.",
      "parentUuid": "af280bd2_4f7c5e04",
      "revId": "bf051e403e0c7bd6dca49acd18e705cf2e1838bd",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "62c7e7c5_70bf693e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-10-18T22:22:22Z",
      "side": 1,
      "message": "Test that newer builds don\u0027t somehow get confused and reject existing system apps or APEX because the version code is the same!",
      "revId": "bf051e403e0c7bd6dca49acd18e705cf2e1838bd",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "744ef4e4_ec5d7d01",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2023-10-18T23:19:54Z",
      "side": 1,
      "message": "There are a lot of CTS tests for package install, and there might be some in fw/b too.\n\nWe should run those with `atest`",
      "revId": "bf051e403e0c7bd6dca49acd18e705cf2e1838bd",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5363faac_92671e42",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2023-10-18T23:21:49Z",
      "side": 1,
      "message": "What we can do with a change like this is ship it at a time when we\u0027re able to run a longer beta.",
      "parentUuid": "61d41a84_92c8c5df",
      "revId": "bf051e403e0c7bd6dca49acd18e705cf2e1838bd",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    }
  ]
}