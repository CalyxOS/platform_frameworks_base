{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "ef23794d_203c786e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-03-29T19:37:01Z",
      "side": 1,
      "message": "This is an optional add-on to `Restrict USB at boot time in \"unlocked\" mode` that it sits atop. That one works just fine without this, but this is nice to have for e.g. testing devices that don\u0027t have a screen lock and stay connected to a PC for debugging.",
      "revId": "b074a726d15ff293b25931881b15f6c4185d1569",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9d4e34f9_fe54bb99",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2023-03-29T19:39:21Z",
      "side": 1,
      "message": "I don\u0027t mind, but I\u0027d like to be a bit more careful and do a bit more testing with this, since\n\nPros:\n* Easy debugging\n\nCons:\n* If we miss something, makes feature less useful\n\nAnd the Cons outweigh the Pros",
      "revId": "b074a726d15ff293b25931881b15f6c4185d1569",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "01b2fab4_33bd9028",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-03-29T19:47:15Z",
      "side": 1,
      "message": "That\u0027s fair, but effectively, mScreenLocked is the same as mIsKeyguardShowing except that it also checks if it\u0027s a secure screen lock. mScreenLocked is AOSP code, and they base their own USB restriction decisions on that rather than on whether the keyguard is showing, and it has been that way going back to Android 9 if not earlier; they don\u0027t even have a variable for whether the keyguard is showing. That\u0027s ours.\n\nThere\u0027s probably a reason that we check whether the keyguard is showing, but there\u0027s no code comment, so I don\u0027t know what it is.",
      "parentUuid": "9d4e34f9_fe54bb99",
      "revId": "b074a726d15ff293b25931881b15f6c4185d1569",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "63474138_74e1b6d0",
        "filename": "services/usb/java/com/android/server/usb/UsbDeviceManager.java",
        "patchSetId": 5
      },
      "lineNbr": 1074,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-03-29T20:03:52Z",
      "side": 1,
      "message": "If we end up deciding that we want this, we should probably remove all of the mIsKeyguardShowing stuff, since it is custom to Restrict USB and having it here is confusing and unexplained. This would make things cleaner for rebasing/fixups too.",
      "revId": "b074a726d15ff293b25931881b15f6c4185d1569",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e130c7a7_fd1cd073",
        "filename": "services/usb/java/com/android/server/usb/UsbDeviceManager.java",
        "patchSetId": 5
      },
      "lineNbr": 1074,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2023-03-29T20:13:33Z",
      "side": 1,
      "message": "https://review.calyxos.org/c/CalyxOS/platform_frameworks_base/+/12205/6/services/usb/java/com/android/server/usb/UsbDeviceManager.java#b1035\n\nSplit it out at https://review.calyxos.org/c/CalyxOS/platform_frameworks_base/+/12205/6/services/usb/java/com/android/server/usb/UsbDeviceManager.java#b280\n\nIt did always exist, I just made it a member variable since we\u0027re using it in multiple places.\n\nIt doesn\u0027t have to be a member variable with this change, can just be a normal variable. If you have a better name, feel free to go for that as well.",
      "parentUuid": "63474138_74e1b6d0",
      "revId": "b074a726d15ff293b25931881b15f6c4185d1569",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3fabf90f_9058757f",
        "filename": "services/usb/java/com/android/server/usb/UsbDeviceManager.java",
        "patchSetId": 5
      },
      "lineNbr": 1074,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-03-29T21:12:47Z",
      "side": 1,
      "message": "Ohhh I see, they already did that check, but in a less-clear way. Okay, got it. But true, it doesn\u0027t need to be a member variable if we want this.",
      "parentUuid": "e130c7a7_fd1cd073",
      "revId": "b074a726d15ff293b25931881b15f6c4185d1569",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "dadfc809_0fdc96ad",
        "filename": "services/usb/java/com/android/server/usb/UsbDeviceManager.java",
        "patchSetId": 5
      },
      "lineNbr": 1081,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-03-29T19:55:45Z",
      "side": 1,
      "message": "FYI: This is called from two places now just to ensure it\u0027s called exactly as often as it was before, but that when it is called, mScreenLocked is up-to-date.",
      "revId": "b074a726d15ff293b25931881b15f6c4185d1569",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    }
  ]
}